<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://thunkable.github.io/webviewer-extension/thunkableWebviewerExtension.js" type="text/javascript"></script>
<script type="text/javascript">
    ThunkableWebviewerExtension.receiveMessage(function(message) {
      function toDataURL(url, callback) {
      var xhr = new XMLHttpRequest();
      xhr.onload = function() {
      var reader = new FileReader();
      reader.onloadend = function() {
      callback(reader.result);
      }
       reader.readAsDataURL(xhr.response);
      };
       xhr.open('GET', url);
      xhr.responseType = 'blob';
      xhr.send();
      }

      toDataURL(message, function(dataUrl) {
      console.log('RESULT:', dataUrl);
      ThunkableWebviewerExtension.postMessage(dataUrl);
    })
    } );
</script>
</head>
<body>
</body>
</html>